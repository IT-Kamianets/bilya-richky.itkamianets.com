<div class="product-card" 
     [class.list-view]="viewMode === 'list'"
     [class.out-of-stock]="!isInStock()"
     (click)="onView()"
     (mouseenter)="isHovered = true"
     (mouseleave)="isHovered = false">
  
  <!-- Image Container -->
  <div class="product-image-container">
    <img [src]="product.image" [alt]="product.title" class="product-image">
    
    <!-- Badges -->
    <div class="product-badges">
      <span class="badge badge-new" *ngIf="product.isNew">New</span>
      <span class="badge badge-discount" *ngIf="hasDiscount()">-{{ product.discount }}%</span>
      <span class="badge badge-out" *ngIf="!isInStock()">Sold out</span>
    </div>
    
    <!-- Quick Actions -->
    <div class="quick-actions" [class.show]="isHovered">
      <button class="btn-quick-action btn-favorite" 
              [class.active]="isFavorite"
              (click)="toggleFavorite($event)"
              [title]="isFavorite ? 'Remove from saved' : 'Save this room'">
        <i class="bi" [ngClass]="isFavorite ? 'bi-heart-fill' : 'bi-heart'"></i>
      </button>
      <button class="btn-quick-action btn-quick-view" 
              (click)="onView()"
              title="Quick view">
        <i class="bi bi-eye"></i>
      </button>
    </div>
  </div>
  
  <!-- Product Info -->
  <div class="product-info">
    
    <!-- Category & Brand -->
    <div class="product-meta" *ngIf="product.category || product.brand">
      <span class="category" *ngIf="product.category">{{ product.category }}</span>
      <span class="brand" *ngIf="product.brand">{{ product.brand }}</span>
    </div>
    
    <!-- Title -->
    <h5 class="product-title" [title]="product.title">{{ product.title }}</h5>
    
    <!-- Description (only in list view) -->
    <p class="product-description" *ngIf="viewMode === 'list'">
      {{ product.description }}
    </p>
    
    <!-- Rating -->
    <div class="product-rating" *ngIf="product.rating">
      <div class="rating-stars">
        <i class="bi bi-star-fill" *ngFor="let s of getStars(product.rating)"></i>
        <i class="bi bi-star" *ngFor="let s of getEmptyStars(product.rating)"></i>
      </div>
      <span class="rating-value">{{ product.rating }}</span>
      <span class="reviews-count" *ngIf="product.reviews">({{ product.reviews.length }})</span>
    </div>
    
    <!-- Price & Availability -->
    <div class="product-footer">
      <div class="price-container">
        <div class="price-row" *ngIf="!hasDiscount()">
          <span class="price-current">UAH {{ product.price.toFixed(0) }}</span>
          <span class="price-note">/ night</span>
        </div>
        <div class="price-row" *ngIf="hasDiscount()">
          <span class="price-old">UAH {{ product.price.toFixed(0) }}</span>
          <span class="price-discounted">UAH {{ getDiscountedPrice().toFixed(0) }}</span>
          <span class="price-note">/ night</span>
        </div>
        <div class="stock-status" [ngClass]="getStockClass()">
          <i class="bi" [ngClass]="{
            'bi-check-circle': isInStock() && product.stock >= 5,
            'bi-exclamation-circle': product.stock < 5 && product.stock > 0,
            'bi-x-circle': !isInStock()
          }"></i>
          <span>{{ getStockStatus() }}</span>
        </div>
      </div>
      
      <!-- Request Button -->
      <button class="btn btn-add-cart" 
              (click)="onQuickAdd($event)"
              [disabled]="!isInStock()">
        <i class="bi bi-calendar-check"></i>
        <span *ngIf="viewMode === 'list'">Request stay</span>
      </button>
    </div>
    
  </div>
</div>

