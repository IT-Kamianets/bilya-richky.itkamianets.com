<main class="gallery-page">
	<section class="gallery-hero">
		<div class="container-lg px-4 py-5">
			<p class="section-kicker">Gallery</p>
			<h1 class="section-title">A visual tour of Bilya Richky</h1>
			<p class="section-subtitle">
				Rooms, terraces, and canyon views captured across the seasons.
			</p>
		</div>
	</section>

	<section class="gallery-body page-body">
		<div class="container-lg px-4 pb-5">
			<div class="gallery-filters">
				<div class="gallery-filters__search">
					<label class="form-label">Search</label>
					<input
						type="text"
						class="form-control"
						placeholder="Search rooms, views, dining"
						[(ngModel)]="searchTerm"
						(ngModelChange)="onFiltersChanged()"
					/>
				</div>
				<div class="gallery-filters__select">
					<label class="form-label">Category</label>
					<select
						class="form-select"
						[(ngModel)]="selectedCategory"
						(ngModelChange)="onFiltersChanged()"
					>
						<option *ngFor="let category of categories" [value]="category">
							{{ category }}
						</option>
					</select>
				</div>
				<div class="gallery-filters__count">
					<span class="badge-soft">{{ filteredItems.length }} photos</span>
				</div>
			</div>

			<div class="gallery-grid" *ngIf="hasResults; else noResults">
				<button
					class="gallery-item"
					type="button"
					*ngFor="let item of pagedItems"
					(click)="openModal(item)"
					[aria-label]="'Open photo of ' + item.title"
				>
					<img [src]="item.imageUrl" [alt]="item.title" loading="lazy" />
					<div class="gallery-item__overlay">
						<h3>{{ item.title }}</h3>
						<p>{{ item.subtitle }}</p>
					</div>
				</button>
			</div>

			<ng-template #noResults>
				<div class="gallery-empty">
					<p>No results found. Try a different category.</p>
				</div>
			</ng-template>

			<nav class="mt-4" aria-label="Gallery pagination" *ngIf="hasResults">
				<ul class="pagination justify-content-center mb-0">
					<li class="page-item" [class.disabled]="currentPage === 1">
						<button class="page-link" type="button" (click)="prevPage()">
							Previous
						</button>
					</li>
					<li
						class="page-item"
						[class.active]="page === currentPage"
						*ngFor="let page of pageNumbers"
					>
						<button class="page-link" type="button" (click)="goToPage(page)">
							{{ page }}
						</button>
					</li>
					<li class="page-item" [class.disabled]="currentPage === totalPages">
						<button class="page-link" type="button" (click)="nextPage()">
							Next
						</button>
					</li>
				</ul>
			</nav>
		</div>
	</section>

	<div class="gallery-modal" *ngIf="activeItem" (click)="closeModal()">
		<div class="gallery-modal__content" role="dialog" aria-modal="true" (click)="$event.stopPropagation()">
			<button class="gallery-modal__close" type="button" (click)="closeModal()" aria-label="Close">
				<i class="bi bi-x-lg"></i>
			</button>
			<div class="gallery-modal__media">
				<img [src]="activeItem.imageUrl" [alt]="activeItem.title" />
			</div>
			<div class="gallery-modal__body">
				<h3>{{ activeItem.title }}</h3>
				<p>{{ activeItem.subtitle }}</p>
			</div>
		</div>
	</div>
</main>
